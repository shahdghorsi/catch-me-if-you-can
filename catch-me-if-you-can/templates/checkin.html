{% extends "base.html" %}

{% block title %}Check In - Catch Me If You Can{% endblock %}

{% block content %}
<div class="checkin-container">
    <div class="checkin-card">
        <h2>ğŸƒâ€â™‚ï¸ Ready to Play?</h2>
        <p class="subtitle">Check in and let your colleagues find you!</p>

        {% if error %}
        <div class="error-message">{{ error }}</div>
        {% endif %}

        <form method="POST" class="checkin-form">
            <div class="form-group">
                <label for="email">Work Email</label>
                <input type="email" id="email" name="email" placeholder="name.surname@virginmediao2.co.uk" required>
                <p class="input-hint">Use your Virgin Media O2 email</p>
            </div>

            <div class="form-group">
                <label>Your Avatar</label>
                <div class="avatar-preview">
                    <div class="emoji-avatar" id="emojiPreview">ğŸ²</div>
                    <p class="avatar-hint">You'll get a random fun emoji!</p>
                </div>
            </div>

            <div class="form-group">
                <label for="team">Your Team</label>
                <select id="team" name="team" class="team-select" required>
                    <option value="">Select your team...</option>
                    <option value="Data Science">ğŸ”¬ Data Science</option>
                    <option value="Data Products">ğŸ“¦ Data Products</option>
                    <option value="Data Platforms">âš™ï¸ Data Platforms</option>
                </select>
                <p class="input-hint">This helps people discover colleagues from different teams!</p>
            </div>

            <div class="form-group location-permission">
                <div class="permission-info">
                    <span class="icon">ğŸ“</span>
                    <div>
                        <strong>Location Permission Required</strong>
                        <p>We'll ask for location access after you check in to track where you are.</p>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn-primary">Check In â†’</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Cycle through random emojis for fun preview
    const emojis = ['ğŸ˜€', 'ğŸ˜', 'ğŸ¤“', 'ğŸ¥³', 'ğŸ¤ ', 'ğŸ¦Š', 'ğŸ±', 'ğŸ¶', 'ğŸ¦', 'ğŸ¸', 'ğŸµ', 'ğŸ¤–', 'ğŸ‘½', 'ğŸƒ', 'ğŸ¦„', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯', 'ğŸ¦‹', 'ğŸ™', 'ğŸ¦–', 'ğŸ¦•', 'ğŸ²', 'ğŸ§™', 'ğŸ§›', 'ğŸ¦¸', 'ğŸ¦¹', 'ğŸ§š', 'ğŸ¤¡'];
    const preview = document.getElementById('emojiPreview');
    let index = Math.floor(Math.random() * emojis.length);

    setInterval(() => {
        index = (index + 1) % emojis.length;
        preview.textContent = emojis[index];
        preview.style.transform = 'scale(1.2)';
        setTimeout(() => preview.style.transform = 'scale(1)', 150);
    }, 800);
</script>
{% endblock %}
